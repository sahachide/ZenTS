<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Response Context | ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" size="57x57" href="/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" size="60x60" href="/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" size="72x72" href="/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" size="76x76" href="/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" size="114x114" href="/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" size="120x120" href="/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" size="144x144" href="/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" size="152x152" href="/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" size="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" size="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" size="96x96" href="/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon/favicon-16x16.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600;700;800&amp;family=Raleway:wght@400;500;600;700;800;900&amp;display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <script>                
        window.addEventListener('load', function () {
          var inputSelector = '.search-box > input';
          var $el = document.querySelector(inputSelector);

          if($el) {          
            $el.disabled = true;
            $el.placeholder = 'Loading...';
  
            var script = document.createElement("script");
            script.addEventListener("load", function() {
              docsearch({
                apiKey: '1c03de24a87faf1bfd8b7e760c63b3ab',
                indexName: 'zents',
                inputSelector: inputSelector,
              });
              $el.disabled = false;
              $el.placeholder = 'Search...';
            });
  
            script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js";
  
            document.body.appendChild(script);            
          }
        });
      </script>
    <meta name="description" content="ZenTS is a Node.js & TypeScript MVC-Framework for building rich web applications, released as free and open-source software under the MIT License. It is designed for building web applications with modern tools and design patterns.">
    <meta name="keywords" content="ZenTS guide tutorial documentation http request framework mvc TypeScript">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#512DA8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.5f5f71b9.css" as="style"><link rel="preload" href="/assets/js/app.ff0d6eb6.js" as="script"><link rel="preload" href="/assets/js/2.1831a849.js" as="script"><link rel="preload" href="/assets/js/21.8bbbd12a.js" as="script"><link rel="preload" href="/assets/js/4.be0fa7c4.js" as="script"><link rel="prefetch" href="/assets/js/10.f60de0dc.js"><link rel="prefetch" href="/assets/js/11.f70646e3.js"><link rel="prefetch" href="/assets/js/12.7d400f46.js"><link rel="prefetch" href="/assets/js/13.75ca8dc6.js"><link rel="prefetch" href="/assets/js/14.53bbd6c1.js"><link rel="prefetch" href="/assets/js/15.485b7772.js"><link rel="prefetch" href="/assets/js/16.d701e551.js"><link rel="prefetch" href="/assets/js/17.e2a1a4bc.js"><link rel="prefetch" href="/assets/js/18.279c874a.js"><link rel="prefetch" href="/assets/js/19.bd5220e3.js"><link rel="prefetch" href="/assets/js/20.9bbbcf25.js"><link rel="prefetch" href="/assets/js/22.46e6349d.js"><link rel="prefetch" href="/assets/js/23.403bfdcc.js"><link rel="prefetch" href="/assets/js/24.1c0b9c00.js"><link rel="prefetch" href="/assets/js/25.1d5dbc6b.js"><link rel="prefetch" href="/assets/js/26.dcb85366.js"><link rel="prefetch" href="/assets/js/27.86601334.js"><link rel="prefetch" href="/assets/js/28.ac72a169.js"><link rel="prefetch" href="/assets/js/29.04ae9240.js"><link rel="prefetch" href="/assets/js/3.656260b0.js"><link rel="prefetch" href="/assets/js/30.24ce4d2b.js"><link rel="prefetch" href="/assets/js/5.61ba91d2.js"><link rel="prefetch" href="/assets/js/6.1b9fb03d.js"><link rel="prefetch" href="/assets/js/7.379d2cb5.js"><link rel="prefetch" href="/assets/js/8.630c86f7.js"><link rel="prefetch" href="/assets/js/9.3cbbae49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5f5f71b9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/zents_logo_icon.png" alt="ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications" class="logo"> <span class="site-name can-hide">ZenTS - Node.js &amp; TypeScript MVC-Framework for building rich web applications</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div><div class="nav-item"><a href="/roadmap.html" class="nav-link">
  Roadmap
</a></div> <a href="https://github.com/sahachide/ZenTS" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/configuration.html" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/cli.html" class="nav-link">
  CLI
</a></div><div class="nav-item"><a href="/roadmap.html" class="nav-link">
  Roadmap
</a></div> <a href="https://github.com/sahachide/ZenTS" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/gettingstarted/installation.html" class="sidebar-link">Installation &amp; Setup</a></li><li><a href="/guide/gettingstarted/helloworld.html" class="sidebar-link">Hello World Example</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advancedguides/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/guide/advancedguides/request.html" class="sidebar-link">Request Context</a></li><li><a href="/guide/advancedguides/response.html" aria-current="page" class="active sidebar-link">Response Context</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#injecting-the-response-context" class="sidebar-link">Injecting the response context</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#controller-action-results" class="sidebar-link">Controller action results</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#html-template-response" class="sidebar-link">HTML / Template response</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#json-response" class="sidebar-link">JSON response</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#sending-manual-responses" class="sidebar-link">Sending manual responses</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#working-with-response-header" class="sidebar-link">Working with response header</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#set-a-header-value" class="sidebar-link">Set a header value</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#get-a-header-value" class="sidebar-link">Get a header value</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#remove-a-header-value" class="sidebar-link">Remove a header value</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#set-content-type-header" class="sidebar-link">Set content type header</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#url-redirects" class="sidebar-link">URL Redirects</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#handling-response-errors" class="sidebar-link">Handling response errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#list-of-error-method" class="sidebar-link">List of error method</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#accessing-raw-response-object" class="sidebar-link">Accessing raw response object</a></li><li class="sidebar-sub-header"><a href="/guide/advancedguides/response.html#next-steps" class="sidebar-link">Next steps</a></li></ul></li><li><a href="/guide/advancedguides/routing.html" class="sidebar-link">Routing</a></li><li><a href="/guide/advancedguides/database.html" class="sidebar-link">Database / ORM</a></li><li><a href="/guide/advancedguides/redis.html" class="sidebar-link">Redis</a></li><li><a href="/guide/advancedguides/user_management.html" class="sidebar-link">User and Session Management</a></li><li><a href="/guide/advancedguides/templates.html" class="sidebar-link">Views &amp; Templates</a></li><li><a href="/guide/advancedguides/static_files.html" class="sidebar-link">Static files</a></li><li><a href="/guide/advancedguides/services.html" class="sidebar-link">Services</a></li><li><a href="/guide/advancedguides/dependency_injection.html" class="sidebar-link">Dependency Injection</a></li><li><a href="/guide/advancedguides/emails.html" class="sidebar-link">Sending emails</a></li></ul></section></li><li><a href="/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/cli.html" class="sidebar-link">Command-line interface (CLI)</a></li><li><a href="/roadmap.html" class="sidebar-link">Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Response Context</h1> <div data-v-3d11b470><div class="reading-time" data-v-3d11b470>
    13 min read (2567 words)
  </div> <div class="illustration-container" data-v-3d11b470><img src="/guide/response.svg" class="illustration-image" data-v-3d11b470></div> <h2 data-v-3d11b470><a href="#" class="header-anchor" data-v-3d11b470>#</a> Table of contents</h2> <div data-v-3d11b470><p data-v-3d11b470></p><div class="table-of-contents" data-v-3d11b470><ul data-v-3d11b470><li data-v-3d11b470><a href="#introduction" data-v-3d11b470>Introduction</a></li><li data-v-3d11b470><a href="#injecting-the-response-context" data-v-3d11b470>Injecting the response context</a></li><li data-v-3d11b470><a href="#controller-action-results" data-v-3d11b470>Controller action results</a><ul data-v-3d11b470><li data-v-3d11b470><a href="#html-template-response" data-v-3d11b470>HTML / Template response</a></li><li data-v-3d11b470><a href="#json-response" data-v-3d11b470>JSON response</a></li></ul></li><li data-v-3d11b470><a href="#sending-manual-responses" data-v-3d11b470>Sending manual responses</a></li><li data-v-3d11b470><a href="#working-with-response-header" data-v-3d11b470>Working with response header</a><ul data-v-3d11b470><li data-v-3d11b470><a href="#set-a-header-value" data-v-3d11b470>Set a header value</a></li><li data-v-3d11b470><a href="#get-a-header-value" data-v-3d11b470>Get a header value</a></li><li data-v-3d11b470><a href="#remove-a-header-value" data-v-3d11b470>Remove a header value</a></li><li data-v-3d11b470><a href="#set-content-type-header" data-v-3d11b470>Set content type header</a></li></ul></li><li data-v-3d11b470><a href="#url-redirects" data-v-3d11b470>URL Redirects</a></li><li data-v-3d11b470><a href="#handling-response-errors" data-v-3d11b470>Handling response errors</a><ul data-v-3d11b470><li data-v-3d11b470><a href="#list-of-error-method" data-v-3d11b470>List of error method</a><ul data-v-3d11b470><li data-v-3d11b470><a href="#list-of-4xx-errors" data-v-3d11b470>List of 4xx errors</a></li><li data-v-3d11b470><a href="#list-of-5xx-errors" data-v-3d11b470>List of 5xx errors</a></li></ul></li></ul></li><li data-v-3d11b470><a href="#accessing-raw-response-object" data-v-3d11b470>Accessing raw response object</a></li><li data-v-3d11b470><a href="#next-steps" data-v-3d11b470>Next steps</a></li></ul></div></div></div><p></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This guide assumes you already familiar with controllers and controller actions. If not, read the <a href="/guide/advancedguides/controllers.html">controller guide</a> first please.</p></div> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The response context represents the HTTP response that a controller action will send as a result of a HTTP request. The result response could be everything, from a rendered HTML template code, a JSON response or a file download. This guide will teach you how to handle responses in a ZenTS application.</p> <h2 id="injecting-the-response-context"><a href="#injecting-the-response-context" class="header-anchor">#</a> Injecting the response context</h2> <p>The response context can be injected into a controller action using the <code>@response</code> or <code>@res</code> annotation:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &quot;res&quot; is the response context</span>

  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The response context contains various useful methods, which are explained in the following chapters.</p> <h2 id="controller-action-results"><a href="#controller-action-results" class="header-anchor">#</a> Controller action results</h2> <p>The return value of an action method is significant, because it will be used as response body. This means, that a controller action is intelligent enough to turn a return value into a response (e.g. by setting the correct response body, header values and / or status code).</p> <h3 id="html-template-response"><a href="#html-template-response" class="header-anchor">#</a> HTML / Template response</h3> <p>A common example is a controller action that returns a webpage (rendered HTML code), which is done by calling <code>this.render()</code> in a controller action:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>@<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>This will return the rendered <code>index.njk</code> template, set the response type to <strong><em>html</em></strong> and the status code to <strong><em>200</em></strong>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Head over to the <a href="/guide/advancedguides/templates.html">template guide</a> to learn more about rendering and creating templates.</p></div> <h3 id="json-response"><a href="#json-response" class="header-anchor">#</a> JSON response</h3> <p>Another common examples are REST APIs or sequential AJAX calls from a SPA which returns a JSON response as response body. ZenTS supports JSON responses out-of-the-box when a controller action is returning a JSON serialize-able value (an <em>object</em> or <em>array</em>, strings or booleans aren't converted to a JSON response):</p> <div class="el-tabs el-tabs--top el-tabs--border-card"><div class="el-tabs__header is-top"><div class="el-tabs__nav-wrap is-top"><div class="el-tabs__nav-scroll"><div role="tablist" class="el-tabs__nav is-top" style="transform:translateX(-0px);"></div></div></div></div><div class="el-tabs__content"><div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token string">'bar'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <div role="tabpanel" aria-hidden="true" id="pane-null" aria-labelledby="tab-null" class="el-tab-pane" style="display:none;"><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div></div> <p>Both examples will send a JSON response as body, set the response type to <code>json</code> and status code to <code>200</code>.</p> <h2 id="sending-manual-responses"><a href="#sending-manual-responses" class="header-anchor">#</a> Sending manual responses</h2> <p>Sometimes the automatically action result handling isn't suite your needs. ZenTS exposes a <code>@response</code> annotation, that can be used to send manual responses:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res
    <span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'&lt;html&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The <code>setStatusCode()</code> sets a custom response status code. There is also a <code>getStatusCode()</code>, that returns the current status code. It's also possible to set the status code of a controller action result (as described above). Just call <code>setStatusCode()</code> before returning a value from the controller action to overwrite the automatically set status code.</p> <p>The <code>@response</code> annotation exposes five different methods for returning various data of different types:</p> <ul><li><code>res.html(html: string)</code>: Send a HTML response body.</li> <li><code>res.json(data: JsonValue)</code>: Send a JSON response body.</li> <li><code>res.text(text: string)</code>: Send a plain text response body.</li> <li><code>res.buffer(buffer: Buffer)</code>: Send a Node.js <a href="https://nodejs.org/api/buffer.html" target="_blank" rel="noopener noreferrer">Buffer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> response.</li> <li><code>res.stream(stream: Stream)</code>: Send a Node.js <a href="https://nodejs.org/api/stream.html" target="_blank" rel="noopener noreferrer">Stream<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> response.</li></ul> <p>Most methods of the response context are also chain-able:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myResponse <span class="token operator">=</span> res
    <span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setStatusMessage</span><span class="token punctuation">(</span><span class="token string">'Created'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      foo<span class="token operator">:</span> <span class="token string">'bar'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// some more code...</span>

  myResponse<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>Be aware, that when you call various body response methods (e.g. first <code>res.html()</code> and then <code>res.json()</code>) only the last one will be returned to the client.</p></div> <h2 id="working-with-response-header"><a href="#working-with-response-header" class="header-anchor">#</a> Working with response header</h2> <p>Working with the response header is similar to the request header, only that the response header is exposed under the <code>res.header</code> object.</p> <h3 id="set-a-header-value"><a href="#set-a-header-value" class="header-anchor">#</a> Set a header value</h3> <p>In order to set a header value you call <code>res.header.set()</code>:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ZenTS also supports setting multiple headers in one call using the <code>multiple()</code> method by supplying an array of key-value objects as first argument:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">multiple</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      key<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> 'bar<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      key<span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">,</span>
      value<span class="token operator">:</span> 'biz<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="get-a-header-value"><a href="#get-a-header-value" class="header-anchor">#</a> Get a header value</h3> <p>To receive a header value that has already been set, use the <code>get()</code> method:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// logs &quot;bar&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>All headers can be received by calling <code>all()</code> of the <code>res.header</code> object:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> headers <span class="token operator">=</span> res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// do something with headers...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="remove-a-header-value"><a href="#remove-a-header-value" class="header-anchor">#</a> Remove a header value</h3> <p>Response header values can be removed by calling the <code>remove()</code> method of the <code>res.header</code> object:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// logs &quot;bar&quot;</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// logs undefined&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="set-content-type-header"><a href="#set-content-type-header" class="header-anchor">#</a> Set content type header</h3> <p>ZenTS offers a shortcut method to set the <em>content-type</em> header of a response based on a filename, extension or just a specific key (like <strong><em>markdown</em></strong>):</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">'file.json'</span><span class="token punctuation">)</span> <span class="token comment">// application/json; charset=utf-8'</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">'markdown'</span><span class="token punctuation">)</span> <span class="token comment">// text/x-markdown; charset=utf-8</span>
  res<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">'text/html'</span><span class="token punctuation">)</span> <span class="token comment">// text/html; charset=utf-8'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="url-redirects"><a href="#url-redirects" class="header-anchor">#</a> URL Redirects</h2> <p>Redirects are commonly used to send the visitor of a webpage to a different URL, for example when a link has changed or is removed over time. A controller action can answer with a redirect response using the <code>res.redirect()</code> method:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">public</span> <span class="token function">index</span><span class="token punctuation">(</span>@response res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/new-location'</span><span class="token punctuation">,</span> <span class="token number">302</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The first argument is the URL, to which the browser will redirect the user. The second one is the status code, which defaults to <code>302</code>. Please take a look at <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> about redirects for more information about the status codes.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>After a controller action has called <code>res.redirect()</code>, the response is send to the client. Therefore you should make sure, that no other response is send anymore (e.g. by returning a different value in the controller action or by calling <code>res.send()</code> manually), otherwise an error will be thrown, because Node.js isn't able to send the response again. While not mandatory, it's a good idea to return the value of <code>res.redirect()</code> in a controller action (like shown in the example above).</p></div> <h2 id="handling-response-errors"><a href="#handling-response-errors" class="header-anchor">#</a> Handling response errors</h2> <p>In complex web-application things go wrong. For example, in a REST-API your controller action might expect some body parameters the client didn't pass in or in another scenario a given entity ID isn't found in the database (thus resulting in a <em>404</em> error). For these kind of errors, the <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">HTTP protocol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> has a wide range of error status codes. You can easily make use of them with the <code>@error</code> annotation, which exposes serval methods that directly maps to the HTTP codes in the 4xx-5xx range.</p> <p>An example is always more helpful then thousand words, so lets take a look at the following code of a controller action that returns a product as <em>JSON</em>.</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>  Controller<span class="token punctuation">,</span> <span class="token keyword">get</span><span class="token punctuation">,</span> error<span class="token punctuation">,</span> ResponseError<span class="token punctuation">,</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'zents'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'My Product'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'My other Product'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>
  @<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/product/:productId'</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">product</span><span class="token punctuation">(</span>@params params<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> @error error<span class="token operator">:</span> ResponseError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> product <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> product<span class="token punctuation">.</span>id <span class="token operator">===</span> params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      error<span class="token punctuation">.</span><span class="token function">notFound</span><span class="token punctuation">(</span><span class="token string">'Product not found!'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> product
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>If the user opens http://localhost:3000/product/42 (and there is product with the ID <em>42</em>) the controller action will set the status code to <em>404</em> and return this <em>JSON</em> response as body:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;statusCode&quot;</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Product not found!&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="list-of-error-method"><a href="#list-of-error-method" class="header-anchor">#</a> List of error method</h3> <p>All the listen methods accepts (at least) two optional arguments: <code>(message?: string, data?: Object | Array) =&gt; void</code>. Some methods, like <code>methodNotAllowed()</code>, accept more arguments (e.g. the allowed HTTP verbs in <code>methodNotAllowed()</code>). Please take a look at the <a href="/api/">API reference</a> of the individual methods.</p> <p>This chapter describes the error methods supported by ZenTS. The descriptions of the individual HTTP error codes have been taken directly from Wikipedia (<a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">Source<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <h4 id="list-of-4xx-errors"><a href="#list-of-4xx-errors" class="header-anchor">#</a> List of 4xx errors</h4> <ul><li><p><code>error.badRequest(message?: string, data?: Object | Array)</code>:
The server cannot or will not process the request due to an apparent client error (e.g., malformed request syntax, size too large, invalid request message framing, or deceptive request routing).</p></li> <li><p><code>error.unauthorized(message?: string, data?: Object | Array)</code>:
Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the requested resource.</p></li> <li><p><code>error.paymentRequired(message?: string, data?: Object | Array)</code>:
Reserved for future use. The original intention was that this code might be used as part of some form of digital cash or micro-payment scheme, as proposed, for example, by GNU Taler but that has not yet happened, and this code is not widely used.</p></li> <li><p><code>error.forbidden(message?: string, data?: Object | Array)</code>:
The request contained valid data and was understood by the server, but the server is refusing action. This may be due to the user not having the necessary permissions for a resource or needing an account of some sort, or attempting a prohibited action (e.g. creating a duplicate record where only one is allowed). This code is also typically used if the request provided authentication by answering the WWW-Authenticate header field challenge, but the server did not accept that authentication. The request should not be repeated.</p></li> <li><p><code>error.notFound(message?: string, data?: Object | Array)</code>:
The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible.</p></li> <li><p><code>error.methodNotAllowed(message?: string, allowed?: string[], data?: Object | Array)</code>:
A request method is not supported for the requested resource; for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.</p></li> <li><p><code>error.notAcceptable(message?: string, data?: Object | Array)</code>:
The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request</p></li> <li><p><code>error.proxyAuthRequired(message?: string, data?: Object | Array)</code>:
The client must first authenticate itself with the proxy.</p></li> <li><p><code>error.requestTimeout(message?: string, data?: Object | Array)</code>:
The server timed out waiting for the request. According to HTTP specifications: &quot;The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.</p></li> <li><p><code>error.conflict(message?: string, data?: Object | Array)</code>:
Indicates that the request could not be processed because of conflict in the current state of the resource, such as an edit conflict between multiple simultaneous updates</p></li> <li><p><code>error.gone(message?: string, data?: Object | Array)</code>:
Indicates that the resource requested is no longer available and will not be available again. This should be used when a resource has been intentionally removed and the resource should be purged. Upon receiving a 410 status code, the client should not request the resource in the future. Clients such as search engines should remove the resource from their indices. Most use cases do not require clients and search engines to purge the resource, and a &quot;404 Not Found&quot; may be used instead.</p></li> <li><p><code>error.lengthRequired(message?: string, data?: Object | Array)</code>:
The request did not specify the length of its content, which is required by the requested resource.</p></li> <li><p><code>error.preconditionFailed(message?: string, data?: Object | Array)</code>:
The server does not meet one of the preconditions that the requester put on the request header fields.</p></li> <li><p><code>error.payloadTooLarge(message?: string, data?: Object | Array)</code>:
The request is larger than the server is willing or able to process.</p></li> <li><p><code>error.uriTooLong(message?: string, data?: Object | Array)</code>:
The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request, in which case it should be converted to a POST request.</p></li> <li><p><code>error.unsupportedMediaType(message?: string, data?: Object | Array)</code>:
The request entity has a media type which the server or resource does not support. For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format</p></li> <li><p><code>error.rangeNotSatisfiable(message?: string, data?: Object | Array)</code>:
The client has asked for a portion of the file (byte serving), but the server cannot supply that portion. For example, if the client asked for a part of the file that lies beyond the end of the file</p></li> <li><p><code>error.expectationFailed(message?: string, data?: Object | Array)</code>:
The server cannot meet the requirements of the Expect request-header field.</p></li> <li><p><code>error.teapot(message?: string, data?: Object | Array)</code>:
No ☕️ or 🍺 allowed here, only 🍵.</p></li> <li><p><code>error.misdirected(message?: string, data?: Object | Array)</code>:
The request was directed at a server that is not able to produce a response.</p></li> <li><p><code>error.badData(message?: string, data?: Object | Array)</code>:
The request was well-formed but was unable to be followed due to semantic errors.</p></li> <li><p><code>error.locked(message?: string, data?: Object | Array)</code>:
The resource that is being accessed is locked.</p></li> <li><p><code>error.failedDependency(message?: string, data?: Object | Array)</code>:
The request failed because it depended on another request and that request failed.</p></li> <li><p><code>error.tooEarly(message?: string, data?: Object | Array)</code>:
Indicates that the server is unwilling to risk processing a request that might be replayed.</p></li> <li><p><code>error.preconditionRequired(message?: string, data?: Object | Array)</code>:
The origin server requires the request to be conditional. Intended to prevent the 'lost update' problem, where a client GETs a resource's state, modifies it, and PUTs it back to the server, when meanwhile a third party has modified the state on the server, leading to a conflict.</p></li> <li><p><code>error.tooManyRequests(message?: string, data?: Object | Array)</code>:
The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.</p></li> <li><p><code>error.illegal(message?: string, data?: Object | Array)</code>:
A server operator has received a legal demand to deny access to a resource or to a set of resources that includes the requested resource.</p></li></ul> <h4 id="list-of-5xx-errors"><a href="#list-of-5xx-errors" class="header-anchor">#</a> List of 5xx errors</h4> <ul><li><p><code>error.internal(message?: string, data?: Object | Array)</code>:
A generic error message, given when an unexpected condition was encountered and no more specific message is suitable</p></li> <li><p><code>error.notImplemented(message?: string, data?: Object | Array)</code>:
The server either does not recognize the request method, or it lacks the ability to fulfil the request. Usually this implies future availability (e.g., a new feature of a web-service API).</p></li> <li><p><code>error.badGateway(message?: string, data?: Object | Array)</code>:
The server was acting as a gateway or proxy and received an invalid response from the upstream server.</p></li> <li><p><code>error.serviceUnavailable(message?: string, data?: Object | Array)</code>:
The server cannot handle the request (because it is overloaded or down for maintenance). Generally, this is a temporary state.</p></li> <li><p><code>error.gatewayTimeout(message?: string, data?: Object | Array)</code>:<br>
The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.</p></li></ul> <h2 id="accessing-raw-response-object"><a href="#accessing-raw-response-object" class="header-anchor">#</a> Accessing raw response object</h2> <p>The raw response object supplied by <a href="https://nodejs.org/api/http.html" target="_blank" rel="noopener noreferrer">Node.js http module<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is exposed under the <code>res.nodeRes</code> property. Working with the raw response object can be useful, if you want to do something with it that is currently not supported by ZenTS. Be aware, that when you modifying some parts of the raw response object, e.g. the header, these modifications aren't automatically applied to the corresponding ZenTS controller action context. In generally, you should avoid modifying the <code>res.nodeRes</code> object directly and use their ZenTS counterparts when ever possible.</p> <h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next steps</h2> <p>Congratulations! You just learned how to handle responses in ZenTS. You should now be familiar with the most important parts of the controller functionalities.</p> <p>Continue by reading the <a href="./routing">routing guide</a> to master setting up endpoints in ZenTS. After that, you should consider learning more about <a href="/guide/advancedguides/templates.html">templates</a> and <a href="/guide/advancedguides/database.html">database management</a>.</p> <ul><li><a href="/guide/advancedguides/routing.html">Routing guide</a></li> <li><a href="/guide/advancedguides/templates.html">Template guide</a></li> <li><a href="/guide/advancedguides/database.html">Database guide</a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sahachide/ZenTS/edit/master/docs/guide/advancedguides/response.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/3/2021, 8:08:38 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/advancedguides/request.html" class="prev">
        Request Context
      </a></span> <span class="next"><a href="/guide/advancedguides/routing.html">
        Routing
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.ff0d6eb6.js" defer></script><script src="/assets/js/2.1831a849.js" defer></script><script src="/assets/js/21.8bbbd12a.js" defer></script><script src="/assets/js/4.be0fa7c4.js" defer></script>
  </body>
</html>
