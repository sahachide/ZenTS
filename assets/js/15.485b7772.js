(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{401:function(t,e,s){"use strict";s.r(e);var a=s(5),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"frontmatter-title"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),s("GuideHeader",{attrs:{guide:"controller"}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#introduction"}},[t._v("Introduction")])]),s("li",[s("a",{attrs:{href:"#a-example-controller"}},[t._v("A example controller")]),s("ul",[s("li",[s("a",{attrs:{href:"#using-route-annotations"}},[t._v("Using route annotations")])])])]),s("li",[s("a",{attrs:{href:"#creating-and-loading-a-new-controller"}},[t._v("Creating and loading a new controller")]),s("ul",[s("li",[s("a",{attrs:{href:"#autoloading-naming-strategy"}},[t._v("Autoloading & naming strategy")])]),s("li",[s("a",{attrs:{href:"#controller-module-export"}},[t._v("Controller module export")])]),s("li",[s("a",{attrs:{href:"#the-controller-annotation"}},[t._v("The @controller annotation")])])])]),s("li",[s("a",{attrs:{href:"#controller-actions"}},[t._v("Controller actions")]),s("ul",[s("li",[s("a",{attrs:{href:"#a-example-response"}},[t._v("A example response")])]),s("li",[s("a",{attrs:{href:"#using-async-await-in-controller-actions"}},[t._v("Using async / await in controller actions")])]),s("li",[s("a",{attrs:{href:"#a-controller-is-just-a-ecmascript-class"}},[t._v("A controller is just a ECMAScript class")])])])]),s("li",[s("a",{attrs:{href:"#action-context"}},[t._v("Action context")])]),s("li",[s("a",{attrs:{href:"#dependency-injection"}},[t._v("Dependency Injection")])]),s("li",[s("a",{attrs:{href:"#best-practice"}},[t._v("Best practice")])]),s("li",[s("a",{attrs:{href:"#next-steps"}},[t._v("Next steps")])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),s("p",[t._v("In a "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller",target:"_blank",rel:"noopener noreferrer"}},[t._v("MVC"),s("OutboundLink")],1),t._v(" framework, controllers play an important role in every ZenTS application. A controller is a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript class"),s("OutboundLink")],1),t._v(" with at least one method (a so-called action), that is responsible for processing requests and generating responses bound to a route. The response could be an HTML page, JSON, a file download or anything else. Practically, a controller will analyze a incoming request, create or update Entities / database records and render templates with injected data. And of course, as a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript class"),s("OutboundLink")],1),t._v(", a controller can also implement all kind of "),s("code",[t._v("protected")]),t._v(" or "),s("code",[t._v("private")]),t._v(" methods.")]),t._v(" "),s("h2",{attrs:{id:"a-example-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-example-controller"}},[t._v("#")]),t._v(" A example controller")]),t._v(" "),s("p",[t._v("A simple controller with just one action (a method / function), returning a random number between 1 and 100 as JSON, will look like this:")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")])]),t._v(" Controller "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/random-number'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" max "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("floor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      result"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("The action is the "),s("code",[t._v("randomNumber()")]),t._v(" method living inside the class.")]),t._v(" "),s("p",[t._v("The important parts of a controller are pretty simple:")]),t._v(" "),s("ul",[s("li",[s("em",[t._v("line 1")]),t._v(": Import the basic abstract "),s("code",[t._v("Controller")]),t._v(" and the "),s("code",[t._v("@get()")]),t._v(" annotation from "),s("code",[t._v("zents")]),t._v(" package.")]),t._v(" "),s("li",[s("em",[t._v("line 3")]),t._v(": Export the controller as a Node.js module, which extends the abstract "),s("code",[t._v("Controller")]),t._v(" from the "),s("code",[t._v("zents")]),t._v(" package.")]),t._v(" "),s("li",[s("em",[t._v("line 4")]),t._v(": Register a new get route "),s("code",[t._v("/random-number")]),t._v(". The action will be accessible under "),s("a",{attrs:{href:"http://localhost:8080/random-number",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080/random-number"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("li",[s("em",[t._v("line 5")]),t._v(": Declaration of the action. You can name it to what ever you wish.")]),t._v(" "),s("li",[s("em",[t._v("line 10")]),t._v(": Return of a random number as an object. This will be automatically converted into a JSON response.")])]),t._v(" "),s("h3",{attrs:{id:"using-route-annotations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-route-annotations"}},[t._v("#")]),t._v(" Using route annotations")]),t._v(" "),s("p",[t._v("In our example controller we used the "),s("code",[t._v("@get()")]),t._v(" annotation to map a controller action to a URL. Annotations are a quiet new feature to JavaScript/TypeScript. You can find more information about them in the "),s("RouterLink",{attrs:{to:"/guide/advancedguides/routing.html"}},[t._v("routing guide")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"creating-and-loading-a-new-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-and-loading-a-new-controller"}},[t._v("#")]),t._v(" Creating and loading a new controller")]),t._v(" "),s("p",[t._v("A typical web application contains a lot of controllers, especially when the application becomes more and more complex. Controller classes in ZenTS follow a specific name convention, which make them autoloadable. It's highly recommend to use the "),s("RouterLink",{attrs:{to:"/cli.html"}},[t._v("CLI")]),t._v(" to create a new controller:")],1),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myproject\nzen add:controller Product\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("Executing the above command will create a new controller called "),s("code",[t._v("ProductController")]),t._v(" inside the projects controller folder. The generated controller will contain some basic example, which you can delete safely.")]),t._v(" "),s("h3",{attrs:{id:"autoloading-naming-strategy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#autoloading-naming-strategy"}},[t._v("#")]),t._v(" Autoloading & naming strategy")]),t._v(" "),s("p",[t._v("When your application grows, you'll write more and more controller classes. One of the biggest annoyances is having to write a long list of controllers inside a index file, which bootstraps your application. This problem is solved by ZenTS's autoloading capabilities. The "),s("code",[t._v("AutoLoader")]),t._v(" will load all controller files from the "),s("code",[t._v("/src/controller/")]),t._v(" directory (the directory is "),s("RouterLink",{attrs:{to:"/configuration.html#path-related-options"}},[t._v("configurable")]),t._v("). The controller classes are also loaded from all sub-directories recursively inside the "),s("code",[t._v("/src/controller/")]),t._v(" directory, makes it a perfect fit to structure your controller files more logical in complex applications.")],1),t._v(" "),s("p",[t._v("When creating your controllers, you've to follow the following naming strategy, otherwise the "),s("code",[t._v("AutoLoader")]),t._v(" can't load your controllers properly.")]),t._v(" "),s("p",[t._v("Suppose you want to create a "),s("strong",[s("em",[t._v("Product Picture")])]),t._v(" controller, the name convention can be constructed as follows:")]),t._v(" "),s("ul",[s("li",[t._v("Turn the first letter in each word separated by hyphens into upper case.")]),t._v(" "),s("li",[t._v("Append the suffix "),s("code",[t._v("Controller")])])]),t._v(" "),s("p",[t._v("The controller name would be "),s("code",[t._v("ProductPictureController")]),t._v(" and the corresponding file would be "),s("code",[t._v("/src/controller/ProductPictureController.ts")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"controller-module-export"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#controller-module-export"}},[t._v("#")]),t._v(" Controller module export")]),t._v(" "),s("p",[t._v("Because TypeScript (or JavaScript) doesn't support autoloading out of the box (like "),s("a",{attrs:{href:"https://www.php.net/manual/en/language.oop5.autoload.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP"),s("OutboundLink")],1),t._v(" for example). ZenTS makes a contract about how controller classes have to be exported as a Node.js module.")]),t._v(" "),s("p",[t._v("There are two ways how the Autoloader fetches the right exported class member, either by exporting the "),s("code",[t._v("class")]),t._v(" as "),s("em",[t._v("default export")]),t._v(" or by exporting a property that is the same then the filename (e.g. export class as "),s("code",[t._v("MyController")]),t._v(" in "),s("code",[t._v("MyController.ts")]),t._v("):")]),t._v(" "),s("Tabs",{attrs:{type:"border-card"}},[s("Tab",{attrs:{label:"Using the default export (recommend)"}},[s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Controller "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")])]),t._v(" Controller "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// implementation...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])]),t._v(" "),s("Tab",{attrs:{label:"Using exported members"}},[s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Controller "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// implementation...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])])],1),t._v(" "),s("p",[t._v("It's up to you, which one you choose, they even can be mixed (in separated controller files). When using exported members, it's important to remark, that the filename must be the same as the exported property.")]),t._v(" "),s("h3",{attrs:{id:"the-controller-annotation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-controller-annotation"}},[t._v("#")]),t._v(" The @controller annotation")]),t._v(" "),s("p",[t._v("As said earlier, the "),s("code",[t._v("AutoLoader")]),t._v(" will load all controllers inside the "),s("code",[t._v("/src/controller/")]),t._v(" directory and it's sub-directories. Internally the Autoloader will register every controller by a key, which defaults to the controller filename. This can be troublesome when two controllers in different sub-directories have the same filename. Imagine the following project folder structure:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// other folder / files have been stripped for readably\n\n|-- src\n    |-- controller\n        |-- SomeController.ts\n        |-- example1\n        |   |-- MyExampleController.ts\n        |   |-- OtherController.ts\n        |-- example2\n            |-- MyExampleController.ts\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("When the Autoloader scans this project directory structure, it will hit "),s("code",[t._v("example1/MyExampleController.ts")]),t._v(" first and will register it with the key "),s("code",[t._v("MyExampleController")]),t._v(" and then goes on to the next file and folders. But the "),s("code",[t._v("AutoLoader")]),t._v(" will fail to register "),s("code",[t._v("example2/MyExampleController.ts")]),t._v(", because it has the same key as the one already registered (a "),s("code",[t._v("warning")]),t._v(" will be logged in that case).")]),t._v(" "),s("p",[t._v("To overcome this problem, ZenTS provides a "),s("code",[t._v("@controller(key: string)")]),t._v(" annotation. When defining our "),s("code",[t._v("example2/MyExampleController.ts")]),t._v(" controller, we can use this annotation to define the key a controller is registered with:")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Controller "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MyCustomExampleController'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// implementation...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Attention!")]),t._v(" "),s("p",[t._v("Please note the difference in casing between the "),s("code",[t._v("@controller()")]),t._v(" annotation and ZenTSs abstract "),s("code",[t._v("Controller")]),t._v(" class (which each controller class should extend). Annotations in ZenTS are always written in lower-case.")])]),t._v(" "),s("p",[t._v("Now the above controller will be registered with the key "),s("code",[t._v("MyCustomExampleController")]),t._v(" and everything works like it should.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You don't need to always use the "),s("code",[t._v("@controller()")]),t._v(" annotation to register your controller inside the "),s("code",[t._v("AutoLoader")]),t._v(". This is totally optional.")])]),t._v(" "),s("h2",{attrs:{id:"controller-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#controller-actions"}},[t._v("#")]),t._v(" Controller actions")]),t._v(" "),s("p",[t._v("Actions are the heart of every controller. They define the shape of an endpoint for a URL and are defined as so-called action methods, whose visibility must be "),s("code",[t._v("public")]),t._v(". The name of an action method is up to you, but to make it work as an URL endpoint, you have to use one of the http related annotations: "),s("code",[t._v("@get()")]),t._v(", "),s("code",[t._v("@post()")]),t._v(", "),s("code",[t._v("@put()")]),t._v(", "),s("code",[t._v("@del()")]),t._v(" or "),s("code",[t._v("@option()")]),t._v(".")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You can read more about these annotations in the "),s("RouterLink",{attrs:{to:"/guide/advancedguides/routing.html"}},[t._v("route guide")]),t._v(".")],1)]),t._v(" "),s("p",[t._v("The return value from a action method represents the response data that will be send to the end users. ZenTS will automatically convert the given return value to a response by using an best-effort approach. This could be a JSON response, when the controller actions returns a json serialize-able value (e.g. an object or array) or a rendered template (HTML).")]),t._v(" "),s("h3",{attrs:{id:"a-example-response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-example-response"}},[t._v("#")]),t._v(" A example response")]),t._v(" "),s("p",[t._v("The following example implements a simple controller action which bind itself to a "),s("code",[t._v("/ping")]),t._v(" endpoint:")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/ping'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      answer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pong'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("That's a quiet simple controller action (and controller), when you open "),s("a",{attrs:{href:"http://localhost:8080/ping",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080/ping"),s("OutboundLink")],1),t._v(" you will see this JSON response body:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"answer"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pong"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("That is because when a controller action returns a plain object (or array) it will be automatically converted to a JSON response. As a rule of thumb, when a controller returns a JSON serialize-able value, it will be converted to a JSON response. Of course, it's possible to manually overwrite this behavior, please refer to the "),s("RouterLink",{attrs:{to:"/guide/advancedguides/response.html"}},[t._v("response guide")]),t._v(" for more information on how to do so.")],1),t._v(" "),s("h3",{attrs:{id:"using-async-await-in-controller-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-async-await-in-controller-actions"}},[t._v("#")]),t._v(" Using async / await in controller actions")]),t._v(" "),s("p",[t._v("One of Node.js biggest advantage is its ability to handle heavy i/o related operations. ZenTS supports this pattern by allowing the developer to write a controller action asynchronously by using the "),s("code",[t._v("async")]),t._v(" / "),s("code",[t._v("await")]),t._v(" syntax.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("If you're not familiar yet with "),s("code",[t._v("async")]),t._v(" / "),s("code",[t._v("await")]),t._v(" syntax in TypeScript/JavaScript, please read "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1),t._v(" or/and "),s("a",{attrs:{href:"https://javascript.info/async-await",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1),t._v(" first. More information about "),s("code",[t._v("Promises")]),t._v(" can be found "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("p",[t._v("Take a look at this example, which extends the previous controller with an "),s("code",[t._v("index()")]),t._v(" action method:")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  @"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/ping'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      answer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pong'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("Note the special "),s("code",[t._v("async")]),t._v(" keyword on "),s("em",[t._v("line 4")]),t._v(". This tells Node.js that the function body will use the "),s("code",[t._v("await")]),t._v(" keyword and thus return a "),s("code",[t._v("Promise")]),t._v(". We also introduce a new method "),s("code",[t._v("this.render()")]),t._v(". This is a helper function which allows us to render a template (in that case the templated located under "),s("code",[t._v("src/view/index.njk")]),t._v("). The "),s("code",[t._v("render()")]),t._v(" function will return a "),s("code",[t._v("Promise")]),t._v(", which will be resolved with a string (the rendered HTML representation of "),s("code",[t._v("index.njk")]),t._v("). Of course, the "),s("code",[t._v("async")]),t._v(" / "),s("code",[t._v("await")]),t._v(" syntax can be used for other things, like querying databases, read/write files onto disc or calling external APIs, too.")]),t._v(" "),s("h3",{attrs:{id:"a-controller-is-just-a-ecmascript-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-controller-is-just-a-ecmascript-class"}},[t._v("#")]),t._v(" A controller is just a ECMAScript class")]),t._v(" "),s("p",[t._v("Even if ZenTS adds some fancy abilities like route annotations to classes, a controller is still just a standard ECMAScript class. So feel free to add "),s("code",[t._v("public")]),t._v(", "),s("code",[t._v("protected")]),t._v(", "),s("code",[t._v("readonly")]),t._v(" or "),s("code",[t._v("private")]),t._v(" members to it. You can even extend the basic ZenTS abstract "),s("code",[t._v("Controller")]),t._v(" if your custom controller share some common code (but consider using "),s("RouterLink",{attrs:{to:"/guide/advancedguides/services.html"}},[t._v("service")]),t._v(" for that because they are more flexible).")],1),t._v(" "),s("h2",{attrs:{id:"action-context"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#action-context"}},[t._v("#")]),t._v(" Action context")]),t._v(" "),s("p",[t._v("A common use case for a controller action is to get some data from a user (e.g. a product id), validate the input, querying the database for the specific record and return a rendered template which displays the data from the record.")]),t._v(" "),s("p",[t._v("For that use case, a developer needs access to data a user has passed over the wire, let it be over via a URL parameter, inside a request body or via query parameters. Usually this is done by accessing some kind of "),s("code",[t._v("request")]),t._v(" object and modifying a "),s("code",[t._v("response")]),t._v(" object.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("request")]),t._v(" and "),s("code",[t._v("response")]),t._v(" object (and more!) in ZenTS are bundled inside an "),s("code",[t._v("Context")]),t._v(" object, which can be injected using the "),s("code",[t._v("@context")]),t._v(" annotation.")]),t._v(" "),s("p",[t._v("This example code shows how this works:")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product/:productId'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@context context"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logs { productId: 42 }")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("ZenTS exports a wide range of annotations related to the "),s("code",[t._v("request")]),t._v(" and "),s("code",[t._v("response")]),t._v(", for example "),s("code",[t._v("@body")]),t._v(" or "),s("code",[t._v("@params")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zents'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product/:productId'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateProduct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    @params params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      productId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    @body body"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n      price"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("productId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("p",[t._v("Using annotations and dependency injection makes it super easy to define the correct type for a controller action and use only the data you really need instead of using a full blown context.")]),t._v(" "),s("p",[t._v("These and other annotations are described further in these guides:")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/request.html"}},[t._v("Request guide")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/.response.html"}},[t._v("Response guide")])],1)]),t._v(" "),s("h2",{attrs:{id:"dependency-injection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dependency-injection"}},[t._v("#")]),t._v(" Dependency Injection")]),t._v(" "),s("p",[t._v("According to "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Dependency_injection",target:"_blank",rel:"noopener noreferrer"}},[t._v("Wikipedia"),s("OutboundLink")],1),t._v(", dependency injection is a technique in which an object receives other objects that it depends on. ZenTS allows you to inject other controllers and services into a controller. Because this is a relative new and complex feature in the TypeScript/JavaScript world, we cover this topic in a separated guide which can be viewed "),s("RouterLink",{attrs:{to:"/guide/advancedguides/dependency_injection.html"}},[t._v("here")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"best-practice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#best-practice"}},[t._v("#")]),t._v(" Best practice")]),t._v(" "),s("p",[t._v("In a well designed web application controllers are usually not complex. Each controller action will only contain a few lines of code. If your controller action code grows expansionary, that often means that you should refactor it and move some code to services or other utility classes.")]),t._v(" "),s("p",[t._v("A Controller...")]),t._v(" "),s("ul",[s("li",[t._v("... may access the request and response context")]),t._v(" "),s("li",[t._v("... may call methods of entities")]),t._v(" "),s("li",[t._v("... may call methods of other controllers")]),t._v(" "),s("li",[t._v("... may call methods of services")]),t._v(" "),s("li",[t._v("... may render templates")]),t._v(" "),s("li",[t._v("... should not process bushiness logic, this should be done in the entity layer")]),t._v(" "),s("li",[t._v("... should not embed HTML, this should be done in templates or by using other frontend frameworks")]),t._v(" "),s("li",[t._v("... should not initialize other services or controllers")])]),t._v(" "),s("h2",{attrs:{id:"next-steps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[t._v("#")]),t._v(" Next steps")]),t._v(" "),s("p",[t._v("Congratulations! You just finished the controller guide. Now you should be familiar with one of the most important parts of a web application. Now it's time to read more about the "),s("code",[t._v("Request")]),t._v(" and "),s("code",[t._v("Response")]),t._v(" object to truly master controllers in ZenTS.")]),t._v(" "),s("p",[t._v("These guides will help you to learn more about controllers:")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/request.html"}},[t._v("Request guide")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/.response.html"}},[t._v("Response guide")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/templates.html"}},[t._v("Template guide")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/database.html"}},[t._v("Database guide")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/advancedguides/dependency_injection.html"}},[t._v("Dependency injection guide")])],1)])],1)}),[],!1,null,null,null);e.default=n.exports}}]);